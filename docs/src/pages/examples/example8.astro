---
import ExampleLayout from '../../layouts/ExampleLayout.astro';
---

<ExampleLayout>
  <script slot="script" is:inline>
    function setApiKey(){
      const docEl = document.getElementById('thedoc');
      const keyInputEl = document.getElementById('key-val-input');
      docEl.setAttribute('api-key-name','api_key');
      docEl.setAttribute('api-key-location','header');
      docEl.setAttribute('api-key-value', keyInputEl.value);
      if (keyInputEl.value.trim()) {
        document.getElementById('header-msg').innerHTML = "<span style='color:lime'>Auth Key Applied</span>";
      } else {
        document.getElementById('header-msg').innerHTML = "<span style='color:orangered'>Removed Key</span>"
      }
    }
  </script>
  <rapi-doc id='thedoc' 
    spec-url='https://petstore.swagger.io/v2/swagger.json'
    allow-authentication = "false"
    allow-spec-file-load = "false"
    api-key-name = "api_key"
    api-key-location = "header"
    api-key-value = "-"
    render-style="read"
  > 
    <div slot='header' style="display: flex;"> 
      <input class='txt' id='key-val-input' type='text' placeholder='API Key' value='special-key' spellcheck='false' >
      <button class='btn' onclick='setApiKey()'>SET KEY</button>
      <span id="header-msg"></span>
    </div>
  </rapi-doc>
</ExampleLayout>
